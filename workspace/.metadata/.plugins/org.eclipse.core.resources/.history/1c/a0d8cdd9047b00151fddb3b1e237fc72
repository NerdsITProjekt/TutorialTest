package Client;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;

public class EventHandler implements ActionListener {
ClientGUI view;
ClientLogic logic;
public EventHandler(ClientGUI view, ClientLogic logic) {
this.view = view;
this.logic = logic;
// Connect ActionListener to the relevant controls
view.btnConnect.addActionListener(this);
view.btnRandom.addActionListener(this);
//view.txtMessage.addActionListener(this);
view.frame.addWindowListener(new WindowAdapter() {
@Override
public void windowClosing(WindowEvent e) {
	if(logic.getSocket() != null){
	EventHandler.this.logic.disconnect();
	System.exit (0);
	}
	else{
		System.exit (0);
	}
}
});
}
/**
* Determine which control generated the event,
* and take the appropriate action
*/
@Override
public void actionPerformed(ActionEvent evt) {
	Object control = evt.getSource();
	if (control == view.btnConnect) {
		logic.connect();
		
} 
	if(control== view.btnRandom){
		 int rand1;
         int rand2;
         int rand3;
         int rand4;
         int rand5;
         int counter = 0;
         //Schleife verhindert das ein Bilder mehrmals angezeigt werden so wird nach jedem klick ein neues angezeigt
             rand1 = (int) (Math.random() * view.picList.size());
             rand2 = (int) (Math.random() * view.picList.size());
             rand3 = (int) (Math.random() * view.picList.size());
             rand4 = (int) (Math.random() * view.picList.size());
             rand5 = (int) (Math.random() * view.picList.size());
             
         
       
          if(counter<3 && view.checkbox1.isSelected()){      
         view.Label1.setIcon(view.picList.get(rand1));
          }
          
           if(counter<3 && view.checkbox2.isSelected()){
        	  view.Label2.setIcon(view.picList.get(rand2));  
          }
          if(counter<3 && view.checkbox3.isSelected()){
        	  view.Label3.setIcon(view.picList.get(rand3));  
          }
           if(counter<3 && view.checkbox4.isSelected()){
        	  view.Label4.setIcon(view.picList.get(rand4));  
          }
          if(counter<3 && view.checkbox5.isSelected()){
        	  view.Label5.setIcon(view.picList.get(rand5));  
          }
         
     
          if(counter >=3){
        	  view.btnRandom.setEnabled(false);
          }
          
          counter++;
          
          view.checkbox1.setEnabled(true);
          view.checkbox2.setEnabled(true);
          view.checkbox3.setEnabled(true);
          view.checkbox4.setEnabled(true);
          view.checkbox5.setEnabled(true);
          
	}
 
	
	else {
System.out .println("Send message");
}
}
}